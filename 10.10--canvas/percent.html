<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>percent</title>
    <style>
        canvas{
            border:2px solid #ff6700;
        }
    </style>
</head>
<body>
<canvas width="300" height="300"></canvas>
<script>
    let canvas = document.querySelector('canvas');
    let ctx = canvas.getContext('2d');
   /*
        Math.PI*2/100
        setInterval  三个参数 回调函数  事件  传的参数 （回调函数）
        初始  num  ++
   */
/*   let t = setInterval(fn,20,80);
   let num = 0;
   function fn(n) {
       let rad = Math.PI/50*num;
       num++;
       if(num == n){
           clearInterval(t)
       }
       ctx.clearRect(0,0,300,300)
       ctx.beginPath();
       ctx.arc(150,150,100,-Math.PI/2,rad-Math.PI/2);
       ctx.lineWidth=10;
       ctx.lineCap='round'
       ctx.stroke();
       ctx.closePath();
       ctx.font='30px sans-serif'
       ctx.textAlign='center'
       ctx.fillText(`${num}%`,150,150)
   }*/
   /* let t = setTimeout(fn,20,80);
    let num = 0;
    function fn(n) {
        let rad = Math.PI/50*num;
        num++;
        if(num == n){
            clearTimeout(t)
        }else{
            t = setTimeout(fn,20,80);
        }
        ctx.clearRect(0,0,300,300)
        ctx.beginPath();
        ctx.arc(150,150,100,-Math.PI/2,rad-Math.PI/2);
        ctx.lineWidth=10;
        ctx.lineCap='round'
        ctx.stroke();
        ctx.closePath();

        ctx.font='30px sans-serif'
        ctx.textAlign='center'
        ctx.fillText(`${num}%`,150,150)
    }*/
   /* requestAnimationFrame()*/
    let t ;
    let num = 0;
    let n =90;
    fn();
    function fn() {
        let rad = Math.PI/50*num;
        num++;
        if(num == n){
           cancelAnimationFrame(t)
        }else{
            t =requestAnimationFrame(fn);
        }
        ctx.clearRect(0,0,300,300)
        ctx.beginPath();
        ctx.arc(150,150,100,-Math.PI/2,rad-Math.PI/2);
        ctx.lineWidth=10;
        ctx.lineCap='round'
        ctx.stroke();
        ctx.closePath();

        ctx.font='30px sans-serif'
        ctx.textAlign='center'
        ctx.fillText(`${num}%`,150,150)
    }
</script>
</body>
</html>